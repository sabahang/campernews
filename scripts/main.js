function shorten(a){return a.length>50?a.replace(/^(.{20}[^\s]*).*/,"$1")+"...":a}function getImgLink(a){return""!==a.image?a.image:a.author.picture}function getImgHeight(a){var b=new Image;return b.src=a,console.log(b.height),b.height}$.getJSON("http://www.freecodecamp.com/news/hot",function(a){a.sort(function(a,b){return b.timePosted-a.timePosted});var b=[],c=new Date(a[0].timePosted).getUTCDate()+1;b.push("<div class='panel-heading'><h1>Camper&nbsp;News</h1></div>"),$.each(a,function(a,d){var e=new Date(d.timePosted),f=!1;c!=e.getUTCDate()&&(b.push($("<li />",{"class":"year"+(0===a?" first":""),html:e.toUTCString().split(" ").splice(0,4).join(" ")}).prop("outerHTML")),c=e.getUTCDate(),f=!0);var g=[],h=[];g.push($("<a/>",{"class":Object.keys(d)[9],href:d.link,target:"_blank",html:$("<img/>",{src:getImgLink(d),onerror:"javascript: this.src='images/not-found.png'"}).prop("outerHTML")}).prop("outerHTML")),h.push($("<a/>",{"class":Object.keys(d)[1],href:d.link,target:"_blank",html:$("<span/>",{html:shorten(d.headline)}).prop("outerHTML")}).prop("outerHTML")),h.push($("<a/>",{"class":Object.keys(d.author)[2],href:"http://www.freecodecamp.com/"+d.author.username,target:"_blank",html:$("<span/>",{html:"by "+d.author.username}).prop("outerHTML")}).prop("outerHTML")),h.push($("<span />",{"class":Object.keys(d)[6],html:d.rank+"&nbsp;<i class='fa fa-thumbs-up'></i>"}).prop("outerHTML")),g.push($("<div />",{"class":"detail",html:h.join("")}).prop("outerHTML")),b.push($("<li />",{"class":"event"+(f?" offset-first":""),id:a,html:g.join("")}).prop("outerHTML"))}),$("<ul />",{"class":"timeline",html:b.join("")}).appendTo("body")});